var ua=navigator.userAgent.toLowerCase();window._tc_bridge_public={platform:null,isTc:null,isLogin:null,isNavbarHidden:null,isGetClientInfo:!1,memberId:null,memberInfoCBObj:null,NaEptStr:function(i){return!!("string"==typeof i&&i.length>0)},NaEptObj:function(i){if(null==i)return!1;if(i.length>0)return!0;if(0===i.length)return!1;for(var t in i)if(hasOwnProperty.call(i,t))return!0;return!1},stringifyAndEncode:function(i){return"string"==typeof i||this.NaEptObj(i)?encodeURIComponent(JSON.stringify(i)):""},decodeAndParse:function(i){return this.NaEptStr(i)?JSON.parse(decodeURIComponent(i)):{}},buildParamString:function(i,t,_){var n={};return n.param=i||null,n.CBPluginName=t||"",n.CBTagName=_||"",window._tc_bridge_public.stringifyAndEncode(n)},ntvCB:function(i){if(i=i||"",this.NaEptStr(i)){var t=this.decodeAndParse(i),_=t.pluginname,n=t.tagname,e=t.param;if(window[_]&&window[_].hasOwnProperty(n))return window[_][n](e);throw"回调web api出错!不存在window._tc_web_*或window._tc_web_*中没有需要回调的方法"}},loadURL:function(i){var t=document.createElement("iframe"),_=document.body||document.documentElement;t.style.display="none",t.setAttribute("src",i),_.appendChild(t),setTimeout(function(){t.parentNode.removeChild(t),t=null},200)},isAppVersionGreatThan:function(i){var t=0;if(/tctravel/.test(ua)){var _=ua.split("/"),n=_.length,e=_[n-1],e=e.split(".");2==e.length?e.push(0):t=parseInt(e.join(""))}return t>=i},init:function(){var i=window.navigator.userAgent.toLowerCase();i.indexOf("iphone")>-1&&(this.platform=0),i.indexOf("ipad")>-1&&(this.platform=0),i.indexOf("android")>-1&&(this.platform=1),this.isTc=-1!=i.indexOf("tctravel")?!0:!1}},window._tc_bridge_public.init(),window._tc_bridge_bar={set_navbar:function(i){var t;if(window._tc_bridge_public.NaEptObj(i)){var t=window._tc_bridge_public.stringifyAndEncode(i);if(0==window._tc_bridge_public.platform)return window._tc_bridge_util.getEasyJsUrl("_tc_ntv_bar","set_navbar",t);if(1==window._tc_bridge_public.platform)return window._tc_ntv_bar.set_navbar(t)}},set_navbar_hidden:function(){var i,t={};return t.isNavbarHidden=!window._tc_bridge_public.isNavbarHidden,i=window._tc_bridge_public.buildParamString(t,"_tc_web_bar","set_navbar_hidden"),window._tc_ntv_bar.set_navbar_hidden(i)},set_toolbar_hidden:function(){var i,t={};return t.isToolbarHidden=!window._tc_bridge_public.isToolbarHidden,i=window._tc_bridge_public.buildParamString(t,"_tc_web_bar","set_tool_bar"),window._tc_ntv_bar.set_toolbar_hidden(i)},shareInfoFromH5:function(i){if(window._tc_bridge_public.NaEptObj(i)){var t=window._tc_bridge_public.stringifyAndEncode(i);return window._tc_ntv_bar.shareInfoFromH5(t)}throw"分享信息不能为空!"}},window._tc_bridge_util={setwebview_back:function(i){0===window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_bar","set_webview_back",i):_tc_ntv_bar.set_webview_back(i)},show_dialog:function(i){var t=i.param,_=window._tc_bridge_public.buildParamString(t,i.CBPluginName,i.CBTagName);0===window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_util","show_dialog",_):window._tc_ntv_util.show_dialog(_)},dispatch:function(i,t){try{var _=document.createEvent("Event");_.initEvent(t,!0,!0),i.dispatchEvent(_)}catch(n){alert(n)}},getEasyJsUrl:function(i,t,_){var n=[];n.push("s"),n.push(encodeURIComponent(_));var e=n.length>0?":"+encodeURIComponent(n.join(":")):"";window._tc_bridge_public.loadURL("easy-js:"+i+":"+encodeURIComponent(t+":")+e)},get_data:function(i){function t(){$.ajax({type:"post",url:"http://61.155.159.99:8010/youlun/api/apitesthandler.ashx",data:JSON.stringify(_),success:function(t){var _={};_.CBData=t,window[i.CBPluginName][i.CBTagName](_)}})}var _=i.param,n=window._tc_bridge_public.buildParamString(_,i.CBPluginName,i.CBTagName);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_util","get_data",n):1==window._tc_bridge_public.platform?window._tc_ntv_util.get_data(n):t()},set_page:function(i){var t=i.param,_=window._tc_bridge_public.buildParamString(t,i.CBPluginName,i.CBTagName);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_util","set_page",_):1==window._tc_bridge_public.platform?window._tc_ntv_util.set_page(_):void 0},set_event:function(i){var t=i.param,_=window._tc_bridge_public.buildParamString(t,i.CBPluginName,i.CBTagName);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_util","set_event",_):1==window._tc_bridge_public.platform?window._tc_ntv_util.set_event(_):void 0},getClientInfo:function(funBack){var ua=navigator.userAgent,isTc=/tctravel/i.test(ua);if(window._tc_bridge_public.isGetClientInfo=!1,window.Android){var AndroidHandler=eval("("+Android.getDataFromAndroid()+")");AndroidHandler&&(AndroidHandler.isTc=isTc=!0,AndroidHandler.client="android",funBack?funBack(AndroidHandler):window._tc_bridge_util.clientInfoCB(AndroidHandler))}if(document.addEventListener("TongChengWebViewJavascriptBridgeReady",function(i){var t=i.bridge,_=0;isTc=!0,t.init(function(i,t){}),t.registerHandler("TongchengJavaScriptHandler",function(i,t){0==_++&&(i.isTc=isTc,i.client="iphone",funBack?funBack(i):window._tc_bridge_util.clientInfoCB(i))})},!1),window.TongChengWindowsPhoneFuncBack=function(message){try{message=eval("("+message+")"),message&&(isTc=!0,message.isTc=isTc),funBack?funBack(message):window._tc_bridge_util.clientInfoCB(data)}catch(e){}},/windows phone 8/i.test(ua))try{window.external.notify("TongChengWindowsPhoneFuncBack")}catch(e){}window.setTimeout(function(){!isTc&&funBack?funBack({isTc:isTc}):funBack&&window._tc_bridge_util.clientInfoCB({isTc:isTc})},1e3)},clientInfoCB:function(i){if(window._tc_bridge_public.NaEptObj(i)&&(window._tc_bridge_public.memberId=i.memberId,window._tc_bridge_public.isGetClientInfo=!0),window._tc_bridge_public.NaEptObj(window._tc_bridge_public.memberInfoCBObj)){var t={pluginname:window._tc_bridge_public.memberInfoCBObj.CBPluginName,tagname:window._tc_bridge_public.memberInfoCBObj.CBTagName,param:{tagname:window._tc_bridge_public.memberInfoCBObj.param.tagname}},_={memberInfo:{memberId:window._tc_bridge_public.memberId}};t.param.CBData=JSON.stringify(_),window._tc_bridge_public.ntvCB(window._tc_bridge_public.stringifyAndEncode(t)),window._tc_bridge_public.memberInfoCBObj=null}},get_member_info:function(i){window._tc_bridge_public.memberInfoCBObj=i,1==window._tc_bridge_public.isGetClientInfo?window.setTimeout(function(){window._tc_bridge_util.clientInfoCB(null)},1):window._tc_bridge_util.getClientInfo()},upload_photo:function(i){var t=window._tc_bridge_public.stringifyAndEncode(i);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_util","upload_photo",t):1==window._tc_bridge_public.platform?window._tc_ntv_util.upload_photo(t):void 0},keyword_search:function(i){var t=window._tc_bridge_public.stringifyAndEncode(i);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_util","keyword_search",t):1==window._tc_bridge_public.platform?window._tc_ntv_util.keyword_search(t):void 0},set_city:function(i){var t=window._tc_bridge_public.stringifyAndEncode(i);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_util","set_city",t):1==window._tc_bridge_public.platform?window._tc_ntv_util.set_city(t):void 0},set_category_event:function(i){var t=window._tc_bridge_public.stringifyAndEncode(i);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_util","set_category_event",t):1==window._tc_bridge_public.platform?window._tc_ntv_util.set_category_event(t):void 0},set_webview_info:function(i){if(!window._tc_bridge_public.isAppVersionGreatThan(710))return null;var t=window._tc_bridge_public.stringifyAndEncode(i);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_util","set_webview_info",t):1==window._tc_bridge_public.platform?null:void 0},show_tips_dialog:function(i){if(!window._tc_bridge_public.isAppVersionGreatThan(720))return null;var t=window._tc_bridge_public.stringifyAndEncode(i);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_util","show_tips_dialog",t):1==window._tc_bridge_public.platform?window._tc_ntv_util.show_tips_dialog(t):void 0},get_network_type:function(i){if(!window._tc_bridge_public.isAppVersionGreatThan(720))return null;var t=window._tc_bridge_public.stringifyAndEncode(i);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_util","get_network_type",t):1==window._tc_bridge_public.platform?window._tc_ntv_util.get_network_type(t):void 0},set_alarm_info:function(i){if(!window._tc_bridge_public.isAppVersionGreatThan(720))return null;var t=window._tc_bridge_public.stringifyAndEncode(i);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_util","set_alarm_info",t):1==window._tc_bridge_public.platform?window._tc_ntv_util.set_alarm_info(t):void 0},get_alarm_info:function(i){if(!window._tc_bridge_public.isAppVersionGreatThan(720))return null;var t=window._tc_bridge_public.stringifyAndEncode(i);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_util","get_alarm_info",t):1==window._tc_bridge_public.platform?window._tc_ntv_util.get_alarm_info(t):void 0},cancel_alarm_info:function(i){if(!window._tc_bridge_public.isAppVersionGreatThan(720))return null;var t=window._tc_bridge_public.stringifyAndEncode(i);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_util","cancel_alarm_info",t):1==window._tc_bridge_public.platform?window._tc_ntv_util.cancel_alarm_info(t):void 0},set_tag_jump:function(i){var t="http://shouji.17u.cn/internal_"+i.param.trackTag+"/settag/settag";document.getElementById("returnUrl").href=t,window._tc_bridge_util.dispatch(document.getElementById("returnUrl"),"click")},show_toast:function(i){if(!window._tc_bridge_public.isAppVersionGreatThan(730))return null;var t=window._tc_bridge_public.stringifyAndEncode(i);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_util","show_toast",t):1==window._tc_bridge_public.platform?window._tc_ntv_util.show_toast(t):void 0}},window._tc_bridge_map={app_location:function(i){var t=window._tc_bridge_public.stringifyAndEncode(i);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_map","app_locate",t):1==window._tc_bridge_public.platform?window._tc_ntv_map.app_locate(t):void 0},show_location:function(i){if(!window._tc_bridge_public.isAppVersionGreatThan(720))return null;var t=window._tc_bridge_public.stringifyAndEncode(i);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_map","show_location",t):1==window._tc_bridge_public.platform?window._tc_ntv_map.show_location(t):void 0},open_navigation_map:function(i){if(!window._tc_bridge_public.isAppVersionGreatThan(730))return null;var t=window._tc_bridge_public.stringifyAndEncode(i);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_map","open_navigation_map",t):1==window._tc_bridge_public.platform?window._tc_ntv_map.open_navigation_map(t):void 0},select_city:function(i){if(!window._tc_bridge_public.isAppVersionGreatThan(730))return null;var t=window._tc_bridge_public.stringifyAndEncode(i);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_map","select_city",t):1==window._tc_bridge_public.platform?window._tc_ntv_map.select_city(t):void 0}},window._tc_bridge_user={user_login:function(i){if(!window._tc_bridge_public.isAppVersionGreatThan(720))return null;var t=window._tc_bridge_public.stringifyAndEncode(i);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_user","user_login",t):1==window._tc_bridge_public.platform?window._tc_ntv_user.user_login(t):void 0},get_device_info:function(i){if(!window._tc_bridge_public.isAppVersionGreatThan(720))return null;var t=window._tc_bridge_public.stringifyAndEncode(i);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_user","get_device_info",t):1==window._tc_bridge_public.platform?window._tc_ntv_user.get_device_info(t):void 0},get_contacts:function(i){if(!window._tc_bridge_public.isAppVersionGreatThan(730))return null;var t=window._tc_bridge_public.stringifyAndEncode(i);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_user","get_contacts",t):1==window._tc_bridge_public.platform?window._tc_ntv_user.get_contacts(t):void 0},get_mailing_address:function(i){if(!window._tc_bridge_public.isAppVersionGreatThan(730))return null;var t=window._tc_bridge_public.stringifyAndEncode(i);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_user","get_mailing_address",t):1==window._tc_bridge_public.platform?window._tc_ntv_user.get_mailing_address(t):void 0},user_logout:function(i){if(!window._tc_bridge_public.isAppVersionGreatThan(730))return null;var t=window._tc_bridge_public.stringifyAndEncode(i);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_user","user_logout",t):1==window._tc_bridge_public.platform?window._tc_ntv_user.user_logout(t):void 0}},window._tc_bridge_web={open_newurl:function(i){if(!window._tc_bridge_public.isAppVersionGreatThan(720))return null;var t=window._tc_bridge_public.stringifyAndEncode(i);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_web","open_newurl",t):1==window._tc_bridge_public.platform?window._tc_ntv_web.open_newurl(t):void 0},data_callback:function(i){if(!window._tc_bridge_public.isAppVersionGreatThan(720))return null;var t=window._tc_bridge_public.stringifyAndEncode(i);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_web","data_callback",t):1==window._tc_bridge_public.platform?window._tc_ntv_web.data_callback(t):void 0}},window._tc_bridge_datetime={pick_datetime:function(i){if(!window._tc_bridge_public.isAppVersionGreatThan(730))return null;var t=window._tc_bridge_public.stringifyAndEncode(i);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_datetime","pick_datetime",t):1==window._tc_bridge_public.platform?window._tc_ntv_datetime.pick_datetime(t):void 0},pick_date:function(i){if(!window._tc_bridge_public.isAppVersionGreatThan(730))return null;var t=window._tc_bridge_public.stringifyAndEncode(i);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_datetime","pick_date",t):1==window._tc_bridge_public.platform?window._tc_ntv_datetime.pick_date(t):void 0}},window._tc_bridge_sale={get_redpackage:function(i){if(!window._tc_bridge_public.isAppVersionGreatThan(730))return null;var t=window._tc_bridge_public.stringifyAndEncode(i);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_sale","get_redpackage",t):1==window._tc_bridge_public.platform?window._tc_ntv_sale.get_redpackage(t):void 0},select_redpackage:function(i){if(!window._tc_bridge_public.isAppVersionGreatThan(730))return null;var t=window._tc_bridge_public.stringifyAndEncode(i);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_sale","select_redpackage",t):1==window._tc_bridge_public.platform?window._tc_ntv_sale.select_redpackage(t):void 0},get_redpackage_with_price:function(i){if(!window._tc_bridge_public.isAppVersionGreatThan(730))return null;var t=window._tc_bridge_public.stringifyAndEncode(i);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_sale","get_redpackage_with_price",t):1==window._tc_bridge_public.platform?window._tc_ntv_sale.get_redpackage_with_price(t):void 0}},window._tc_bridge_pay={pay_creditcard:function(i){if(!window._tc_bridge_public.isAppVersionGreatThan(730))return null;var t=window._tc_bridge_public.stringifyAndEncode(i);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_pay","pay_creditcard",t):1==window._tc_bridge_public.platform?window._tc_ntv_pay.pay_creditcard(t):void 0},pay_alipay:function(i){if(!window._tc_bridge_public.isAppVersionGreatThan(730))return null;var t=window._tc_bridge_public.stringifyAndEncode(i);return 0==window._tc_bridge_public.platform?window._tc_bridge_util.getEasyJsUrl("_tc_ntv_pay","pay_alipay",t):1==window._tc_bridge_public.platform?window._tc_ntv_pay.pay_alipay(t):void 0}};